dag:
  description: |
    This is a simple pipeline that demonstrates passing data between steps.

    1. Setup: We setup a data folder, we ignore if it is already present
    2. Create Content: We create a "hello.txt" and "put" the file in catalog
    3. Clean up to get again: We remove the data folder. Note that this is stubbed to prevent
      accidental deletion of your contents. You can change type to task to make really run.
    4. Retrieve Content: We "get" the file "hello.txt" from the catalog and show the contents
    5. Cleanup: We remove the data folder. Note that this is stubbed to prevent accidental deletion.


    You can run this pipeline by:
       runnable execute -f examples/retry-fixed.yaml -c examples/configs/fs-catalog-run_log.yaml \
       --use-cached wrong-file-name

  start_at: Setup
  steps:
    Setup:
      type: task # (1)
      command_type: shell
      command: mkdir -p data
      next: Create Content
    Create Content:
      type: stub # (2)
      command_type: shell
      command: |
        echo "Hello from runnable" >> data/hello.txt
      next: Retrieve Content
      catalog:
        put:
          - data/hello.txt
    Retrieve Content:
      type: task
      command_type: shell
      command: cat data/hello.txt
      catalog:
        get:
          - "data/hello.txt" # You can use wild cards following glob pattern
      next: success
    success:
      type: success
    fail:
      type: fail
