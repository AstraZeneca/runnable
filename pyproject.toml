[project]
name = "runnable"
version = "0.0.0"
description = "Add your description here"
readme = "README.md"
authors = [
    { name = "Vammi, Vijay", email = "vijay.vammi@astrazeneca.com" }
]
requires-python = ">=3.9"
dependencies = [
    "click-plugins>=1.1.1",
    "click<=8.1.3",
    "pydantic>=2.10.3",
    "ruamel-yaml>=0.18.6",
    "stevedore>=5.4.0",
    "rich>=13.9.4",
    "dill>=0.3.9",
    "setuptools>=75.6.0",
    "python-dotenv>=1.0.1",
]

[project.scripts]
runnable = 'runnable.cli:cli'

[project.optional-dependencies]
docker = [
    "docker>=7.1.0",
]
notebook = [
    "ploomber-engine>=0.0.33",
]
examples = [
    "pandas>=2.2.3",
]

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[dependency-groups]
dev = [
    "pytest-cov>=6.0.0",
    "pytest>=8.3.4",
    "pytest-mock>=3.14.0",
    "mypy>=1.13.0",
    "pre-commit>=4.0.1",
]
docs = [
    "mkdocs-section-index>=0.3.9",
    "mkdocs>=1.6.1",
    "mkdocs-material>=9.5.49",
    "mkdocstrings>=0.27.0",
    "mkdocs-click>=0.8.1",
    "mkdocstrings-python>=1.12.2",
]

[tool.uv.workspace]
members = ["extensions/*"]

[tool.uv.sources]
nodes = {workspace = true}
secrets = {workspace = true}
catalog = {workspace = true}
run_log_store = {workspace = true}
executor = {workspace = true}


[project.entry-points.'executor']
"local" = "extensions.executor.local:LocalExecutor"
"local-container" = "runnable.extensions.executor.local_container.implementation:LocalContainerExecutor"
"argo" = "runnable.extensions.executor.argo.implementation:ArgoExecutor"
"mocked" = "runnable.extensions.executor.mocked.implementation:MockedExecutor"
"retry" = "runnable.extensions.executor.retry.implementation:RetryExecutor"

[project.entry-points.'secrets']
"do-nothing" = "runnable.secrets:DoNothingSecretManager"
"dotenv" = "extensions.secrets.dotenv:DotEnvSecrets"
"env-secrets" = "runnable.secrets:EnvSecretsManager"

[project.entry-points.'catalog']
"do-nothing" = "runnable.catalog:DoNothingCatalog"
"file-system" = "extensions.catalog.file_system:FileSystemCatalog"

[project.entry-points.'run_log_store']
"buffered" = "runnable.datastore:BufferRunLogstore"
file-system = "extensions.run_log_store.file_system:FileSystemRunLogstore"
"chunked-fs" = "extensions.run_log_store.chunked_file_system.implementation:ChunkedFileSystemRunLogStore"

[project.entry-points.'pickler']
"pickle" = "runnable.pickler:NativePickler"

[project.entry-points.'integration']
# left empty for now

[project.entry-points.'nodes']
"task" = "extensions.nodes.nodes:TaskNode"
"fail" = "extensions.nodes.nodes:FailNode"
"success" = "extensions.nodes.nodes:SuccessNode"
"parallel" = "extensions.nodes.nodes:ParallelNode"
"map" = "extensions.nodes.nodes:MapNode"
"dag" = "extensions.nodes.nodes:DagNode"
"stub" = "extensions.nodes.nodes:StubNode"

[project.entry-points.'tasks']
"python" = "runnable.tasks:PythonTaskType"
"shell" = "runnable.tasks:ShellTaskType"
"notebook" = "runnable.tasks:NotebookTaskType"
